---
# https://taskfile.dev
version: '3'

env:
  SRCDIR: ./src/

tasks:
  install:
    desc: "ğŸ”§ Install dependencies"
    cmds:
      - echo "ğŸ”§ Installing dependencies.."
      - uv sync --all-extras --dev
  build:
    desc: "ğŸ—ï¸  Build React code"
    cmds:
      - uv build
  lint:
    silent: true
    desc: "ğŸ§¹ Run linters"
    cmds:
      - echo "ğŸ§¹ Running linters.."
      - uv run ruff format "$SRCDIR"
      - uv run ruff check "$SRCDIR" --fix
      - uv run mypy --pretty "$SRCDIR"

  lint-check:
    desc: ğŸ§¹ Check whether the codebase is linted
    cmds:
      - echo "ğŸ§¹ Linting"
      - uv run ruff format --check "$SRCDIR"
      - uv run ruff check "$SRCDIR"
      - uv run mypy --pretty "$SRCDIR"

  test:
    silent: true
    desc: "ğŸ§ª Run tests"
    cmds:
      - echo "ğŸ§ª Running tests.."
      - uv run pytest --cov --cov-report=html --cov-report=term --cov-report xml:.coverage.xml
